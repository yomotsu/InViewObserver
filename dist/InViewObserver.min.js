!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.InViewObserver=n()}(this,function(){"use strict";function t(t,n){var e=void 0,o=void 0;return function(){var r=Date.now();e&&r<e+n?(clearTimeout(o),o=setTimeout(function(){e=r,t()},n)):(e=r,t())}}function n(){window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight}function e(t){var n=t.getBoundingClientRect();return{partIn:0<-n.top&&-n.top<n.height||n.bottom-n.height<o&&o<n.bottom,wholeIn:n.top>=0&&n.bottom<=o}}var o=0;n(),window.addEventListener("resize",t(n,250));var r=[],i=function(){for(var t=0,n=r.length;t<n;t++){for(var o=r[t],i=[],a=0,c=o.length;a<c;a++){var u=o[a],s=u.state,d=e(u.el),f=d.wholeIn?"WHOLE_IN":d.partIn?"PART_IN":"OUT",h=s!==f;u.willRemove&&i.push(a),h&&"WHOLE_IN"===f?(u.state=f,u.onEnterEnd()):h&&"OUT"===s&&"PART_IN"===f?(u.state=f,u.onEnterStart()):h&&"PART_IN"===s&&"OUT"===f?(u.state=f,u.onLeaveEnd()):!h||d.wholeIn||(u.state=f,u.onLeaveStart())}for(var l=i.length;l--;)o.splice(i[l],1)}};window.addEventListener("scroll",t(i,100)),window.addEventListener("resize",t(i,250));return function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.watchTargets=[],r.push(this.watchTargets)}return t.prototype.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e(t.el);n.partIn&&t.onEnterStart&&t.onEnterStart(),n.wholeIn&&t.onEnterEnd&&t.onEnterEnd();var o=n.wholeIn?"WHOLE_IN":n.partIn?"PART_IN":"OUT";this.watchTargets.push({el:t.el,onEnterStart:t.onEnterStart||function(){},onEnterEnd:t.onEnterEnd||function(){},onLeaveStart:t.onLeaveStart||function(){},onLeaveEnd:t.onLeaveEnd||function(){},state:o})},t.prototype.remove=function(t){this.watchTargets.some(function(n){if(n.el===t)return n.willRemove=!0,!0})},t.prototype.reset=function(){this.watchTargets.length=0},t.isInView=function(t){return e(t)},t}()});
